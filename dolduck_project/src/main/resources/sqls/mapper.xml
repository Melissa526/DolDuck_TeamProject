<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">

	<resultMap type="MemberDto" id="MemberMap">
		<result column="MEMBER_SEQ" property="seq" />
		<result column="MEMBER_ID" property="id" />
		<result column="MEMBER_PW" property="pw" />
		<result column="MEMBER_NAME" property="name" />
		<result column="MEMBER_PHONE" property="phone" />
		<result column="MEMBER_ADDR" property="addr" />
		<result column="MEMBER_EMAIL" property="email" />
		<result column="MEMBER_REGDATE" property="regdate" />
		<result column="MEMBER_ENABLED" property="enabled" />
		<result column="MEMBER_ROLE" property="role" />
		<result column="MEMBER_VOTE" property="vote" />
	</resultMap>
	
	<select id="selectList" resultType="memberDto">
		SELECT * FROM MEMBER
	</select>

	<select id="selectOne" parameterType="String"
		resultType="memberDto">
		SELECT * FROM MEMBER WHERE MEMBER_ID=#{id}
	</select>

	<insert id="insert" parameterType="memberDto">
		INSERT INTO MEMBER
		VALUES(MEMBERSEQ.NEXTVAL,#{id},#{pw},#{name},#{phone},#{addr},#{email},SYSDATE,'Y','USER',0)
	</insert>

	<update id="update" parameterType="memberDto">
		UPDATE MEMBER SET
		MEMBER_PW=#{pw}, MEMBER_NAME=#{name} WHERE
		MEMBER_ID=#{id}
	</update>

	<delete id="delete" parameterType="String">
		DELETE FROM MEMBER WHERE
		MEMBER_ID=#{id}
	</delete>

	<delete id="muldel" parameterType="String">
		DELETE FROM MEMBER WHERE MEMBER_ID IN
		<foreach collection="list" item="item" open="(" separator=","
			close=")">
			#{item}
		</foreach>
	</delete>

	<select id="login" parameterType="map" resultType="memberDto">
		SELECT *
		FROM
		MEMBER
		WHERE MEMBER_ID=#{id} AND MEMBER_PW=#{pw}
	</select>

</mapper>
